
<html>
	
	<head>
		<script src="jquery-2.1.3.min.js"></script>
		<link rel="stylesheet" href="emojify.css">
		<title> Emojify!</title>
	</head>

	<body>
		<div id="header">
			<h1 id="title"> :grin:</h1>
			
		</div>

		<div id="input-output">
			<form id="input-form" onsubmit="emojifyText()">
				<textarea id="inputField" rows="4" cols="50"></textarea>
				<br>
				<input id="numberInput" type="number" min="0">
				<br>
				<input type="submit" value="Submit">
			</form>

			<textarea id="outputField" rows="4" cols="50"></textarea>
		</div>

	</body>
	<link href="emoji.css" rel="stylesheet" type="text/css" />
	<script src="emoji.js" type="text/javascript"></script>
	<script type="text/javascript">
	var rawTitle = document.getElementById("title");
	//var emojiTitle = emoji.replace_colons(":smile::grin:");
	emoji.text_mode = true;
	emoji.img_path = "https://github.com/github/gemoji/tree/master/images/emoji/unicode"
	rawTitle.textContent = emojiTitle;

	function emojifyText(){
		var inputString = document.getElementById('inputField').value;
		var threshold = document.getElementById('numberInput').value;
		$.ajax({
			type: 'GET',
			url: '/emojify',
			data: {
				input: inputString,
				threshold: threshold
			},
			success: function(emojis){
				callback(inputString, emojis);
			},
			error: function(){
				callback(inputString, '');
			}
		});
	}

	function callback(inputString, colonString){
		var output = emoji.replace_colons(colonString);
		var finalString = inputString + output;
		//document.getElementById('outputField').textContent = finalString;
		//$('#outputField').val(finalString);
		rawTitle.textContent=finalString;
		return finalString;
	}
	</script>
</html>
 